=== puma startup: 2019-07-27 00:37:30 +0300 ===
Exiting
=== puma startup: 2019-07-27 00:40:04 +0300 ===
[67394] * Starting control server on unix:///var/folders/_k/wr5y7wjn5r12l7gdz8spmvl40000gn/T/puma-status-1564177204006-67394
[67394] - Worker 0 (pid: 67418) booted, phase: 0
Started GET "/" for ::1 at 2019-07-27 00:40:04 +0300
Started GET "/" for ::1 at 2019-07-27 00:40:09 +0300
  
ActiveRecord::ConnectionTimeoutError (could not obtain a connection from the pool within 5.000 seconds (waited 5.002 seconds); all pooled connections were in use):
  
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:201:in `block in wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `loop'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:151:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `block in poll'
/Users/max/.rbenv/versions/2.6.3/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:155:in `synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:799:in `acquire_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:523:in `checkout'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:382:in `connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:1014:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:118:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:90:in `connection'
activerecord (5.2.3) lib/active_record/migration.rb:554:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
  
ActiveRecord::ConnectionTimeoutError (could not obtain a connection from the pool within 5.000 seconds (waited 5.000 seconds); all pooled connections were in use):
  
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:201:in `block in wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `loop'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:151:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `block in poll'
/Users/max/.rbenv/versions/2.6.3/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:155:in `synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:799:in `acquire_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:523:in `checkout'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:382:in `connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:1014:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:118:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:90:in `connection'
activerecord (5.2.3) lib/active_record/migration.rb:554:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
Started GET "/favicon.ico" for ::1 at 2019-07-27 00:40:15 +0300
  
ActiveRecord::ConnectionTimeoutError (could not obtain a connection from the pool within 5.000 seconds (waited 5.000 seconds); all pooled connections were in use):
  
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:201:in `block in wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `loop'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:151:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `block in poll'
/Users/max/.rbenv/versions/2.6.3/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:155:in `synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:799:in `acquire_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:523:in `checkout'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:382:in `connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:1014:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:118:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:90:in `connection'
activerecord (5.2.3) lib/active_record/migration.rb:554:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
Started GET "/api/films/suggested" for 127.0.0.1 at 2019-07-27 00:40:25 +0300
Started GET "/api/users" for 127.0.0.1 at 2019-07-27 00:40:25 +0300
  
  
ActiveRecord::ConnectionTimeoutError (could not obtain a connection from the pool within 5.000 seconds (waited 5.002 seconds); all pooled connections were in use):
ActiveRecord::ConnectionTimeoutError (could not obtain a connection from the pool within 5.000 seconds (waited 5.003 seconds); all pooled connections were in use):
  
  
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:201:in `block in wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `loop'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:151:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `block in poll'
/Users/max/.rbenv/versions/2.6.3/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:155:in `synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:799:in `acquire_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:523:in `checkout'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:382:in `connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:1014:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:118:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:90:in `connection'
activerecord (5.2.3) lib/active_record/migration.rb:554:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:201:in `block in wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `loop'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:190:in `wait_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:151:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `internal_poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `block in poll'
/Users/max/.rbenv/versions/2.6.3/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:155:in `synchronize'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:145:in `poll'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:799:in `acquire_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:523:in `checkout'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:382:in `connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:1014:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:118:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:90:in `connection'
activerecord (5.2.3) lib/active_record/migration.rb:554:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
[67394] - Gracefully shutting down workers...
[67394] * Restarting...
=> Booting Puma
=> Rails 5.2.3 application starting in development 
=> Run `rails server -h` for more startup options
[67394] Puma starting in cluster mode...
[67394] * Version 3.12.1 (ruby 2.6.3-p62), codename: Llamas in Pajamas
[67394] * Min threads: 5, max threads: 5
[67394] * Environment: development
[67394] * Process workers: 1
[67394] * Phased restart available
[67394] * Listening on tcp://localhost:3000
[67394] Use Ctrl-C to stop
=== puma startup: 2019-07-27 00:40:57 +0300 ===
[67394] * Starting control server on unix:///var/folders/_k/wr5y7wjn5r12l7gdz8spmvl40000gn/T/puma-status-1564177257022-67394
[67394] - Worker 0 (pid: 67510) booted, phase: 0
[67394] - Gracefully shutting down workers...
[67394] === puma shutdown: 2019-07-27 00:42:02 +0300 ===
[67394] - Goodbye!
Exiting
=== puma startup: 2019-07-27 00:42:04 +0300 ===
[67596] * Starting control server on unix:///var/folders/_k/wr5y7wjn5r12l7gdz8spmvl40000gn/T/puma-status-1564177324450-67596
[67596] - Worker 0 (pid: 67620) booted, phase: 0
Started GET "/api/films/suggested" for 127.0.0.1 at 2019-07-27 00:42:33 +0300
Started GET "/api/users" for 127.0.0.1 at 2019-07-27 00:42:33 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  ↳ /Users/max/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  ↳ /Users/max/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by FilmsController#suggested as HTML
Processing by UsersController#index as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mUser Load (9.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  ↳ app/controllers/users_controller.rb:5
  [1m[36mFilm Load (2.6ms)[0m  [1m[34mSELECT "films".* FROM "films" WHERE "films"."state" = $1[0m  [["state", 0]]
  ↳ app/controllers/films_controller.rb:11
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 6]]
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/serializers/user_serializer.rb:7
  ↳ app/serializers/film_serializer.rb:7
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 5]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 9]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 96ms (Views: 33.2ms | ActiveRecord: 24.9ms)


  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 3], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 3]]
  ↳ app/serializers/film_serializer.rb:24
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 4], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:7
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 4], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 4]]
  ↳ app/serializers/film_serializer.rb:24
Completed 200 OK in 111ms (Views: 43.8ms | ActiveRecord: 15.5ms)


Started GET "/api/users/me" for 127.0.0.1 at 2019-07-27 00:42:34 +0300
Processing by UsersController#me as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.6ms)


Started GET "/api/users" for 127.0.0.1 at 2019-07-27 00:42:38 +0300
Started GET "/api/films/suggested" for 127.0.0.1 at 2019-07-27 00:42:38 +0300
Processing by UsersController#index as HTML
Processing by FilmsController#suggested as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  ↳ app/controllers/users_controller.rb:5
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 6]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[36mFilm Load (4.5ms)[0m  [1m[34mSELECT "films".* FROM "films" WHERE "films"."state" = $1[0m  [["state", 0]]
  ↳ app/controllers/films_controller.rb:11
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 5]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[36mReview Load (1.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:7
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 9]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 17ms (Views: 4.8ms | ActiveRecord: 10.7ms)


  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 3], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (0.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 3]]
  ↳ app/serializers/film_serializer.rb:24
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 4], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:7
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.8ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 4], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (2.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 4]]
  ↳ app/serializers/film_serializer.rb:24
Completed 200 OK in 30ms (Views: 12.9ms | ActiveRecord: 15.4ms)


Started GET "/api/users/me" for 127.0.0.1 at 2019-07-27 00:42:39 +0300
Processing by UsersController#me as HTML
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[35m (2.7ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 8ms (Views: 1.7ms | ActiveRecord: 4.6ms)


[67596] - Gracefully shutting down workers...
[67596] === puma shutdown: 2019-07-27 00:43:20 +0300 ===
[67596] - Goodbye!
Exiting
=== puma startup: 2019-07-27 00:43:22 +0300 ===
[67716] * Starting control server on unix:///var/folders/_k/wr5y7wjn5r12l7gdz8spmvl40000gn/T/puma-status-1564177402294-67716
[67716] - Worker 0 (pid: 67731) booted, phase: 0
Started GET "/api/films/suggested" for 127.0.0.1 at 2019-07-27 00:43:32 +0300
Started GET "/api/users" for 127.0.0.1 at 2019-07-27 00:43:32 +0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  ↳ /Users/max/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  ↳ /Users/max/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by UsersController#index as HTML
Processing by FilmsController#suggested as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  ↳ app/controllers/users_controller.rb:5
  [1m[36mFilm Load (0.8ms)[0m  [1m[34mSELECT "films".* FROM "films" WHERE "films"."state" = $1[0m  [["state", 0]]
  ↳ app/controllers/films_controller.rb:11
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 6]]
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/serializers/user_serializer.rb:7
  ↳ app/serializers/film_serializer.rb:7
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 5]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 9]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 86ms (Views: 47.0ms | ActiveRecord: 12.6ms)


  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 3], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 3]]
  ↳ app/serializers/film_serializer.rb:24
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 4], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:7
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 4], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 4]]
  ↳ app/serializers/film_serializer.rb:24
Completed 200 OK in 116ms (Views: 66.3ms | ActiveRecord: 17.2ms)


Started GET "/api/users/me" for 127.0.0.1 at 2019-07-27 00:43:33 +0300
Processing by UsersController#me as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 4ms (Views: 1.4ms | ActiveRecord: 0.8ms)


[67716] - Gracefully shutting down workers...
[67716] === puma shutdown: 2019-07-27 00:44:11 +0300 ===
[67716] - Goodbye!
Exiting
=== puma startup: 2019-07-27 00:46:50 +0300 ===
[67921] * Starting control server on unix:///var/folders/_k/wr5y7wjn5r12l7gdz8spmvl40000gn/T/puma-status-1564177610481-67921
[67921] - Worker 0 (pid: 67935) booted, phase: 0
Started GET "/api/films/suggested" for 127.0.0.1 at 2019-07-27 00:46:52 +0300
Started GET "/api/users" for 127.0.0.1 at 2019-07-27 00:46:52 +0300
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  ↳ /Users/max/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  ↳ /Users/max/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by UsersController#index as HTML
Processing by FilmsController#suggested as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mUser Load (5.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  ↳ app/controllers/users_controller.rb:5
  [1m[36mFilm Load (1.4ms)[0m  [1m[34mSELECT "films".* FROM "films" WHERE "films"."state" = $1[0m  [["state", 0]]
  ↳ app/controllers/films_controller.rb:11
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 6]]
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/serializers/user_serializer.rb:7
  ↳ app/serializers/film_serializer.rb:7
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 5]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (9.9ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 9]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 85ms (Views: 36.8ms | ActiveRecord: 22.5ms)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 3], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 3]]
  ↳ app/serializers/film_serializer.rb:24
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 4], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:7
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 4], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 4]]
  ↳ app/serializers/film_serializer.rb:24
Completed 200 OK in 112ms (Views: 66.0ms | ActiveRecord: 13.9ms)


Started GET "/api/users/me" for 127.0.0.1 at 2019-07-27 00:46:52 +0300
Processing by UsersController#me as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 6ms (Views: 2.1ms | ActiveRecord: 0.9ms)


Started POST "/api/films/4/watched" for 127.0.0.1 at 2019-07-27 00:46:56 +0300
Processing by FilmsController#mark_watched as HTML
  Parameters: {"date"=>"2019-07-27", "id"=>"4", "film"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:48
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/films_controller.rb:48
  [1m[36mFilm Load (0.2ms)[0m  [1m[34mSELECT  "films".* FROM "films" WHERE "films"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:48
  [1m[36mReview Create (0.7ms)[0m  [1m[32mINSERT INTO "reviews" ("user_id", "film_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 10], ["film_id", 4], ["created_at", "2019-07-26 21:46:56.968654"], ["updated_at", "2019-07-26 21:46:56.968654"]]
  ↳ app/controllers/films_controller.rb:48
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/films_controller.rb:48
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/films_controller.rb:23
  [1m[36mReview Update (0.2ms)[0m  [1m[33mUPDATE "reviews" SET "date_watched" = $1, "updated_at" = $2 WHERE "reviews"."id" = $3[0m  [["date_watched", "2019-07-27"], ["updated_at", "2019-07-26 21:46:56.971453"], ["id", 12]]
  ↳ app/controllers/films_controller.rb:23
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/films_controller.rb:23
Completed 204 No Content in 9ms (ActiveRecord: 2.4ms)


Started GET "/api/films/suggested" for 127.0.0.1 at 2019-07-27 00:46:59 +0300
Started GET "/api/users" for 127.0.0.1 at 2019-07-27 00:46:59 +0300
Processing by FilmsController#suggested as HTML
Processing by UsersController#index as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mFilm Load (0.6ms)[0m  [1m[34mSELECT "films".* FROM "films" WHERE "films"."state" = $1[0m  [["state", 0]]
  ↳ app/controllers/films_controller.rb:11
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  ↳ app/controllers/users_controller.rb:5
  [1m[36mReview Load (0.4ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:7
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 6]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 5]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 3], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[36mReview Load (0.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 9]]
  ↳ app/serializers/film_serializer.rb:24
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 15ms (Views: 8.4ms | ActiveRecord: 4.1ms)


  [1m[36mReview Load (0.5ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 4], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:7
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 4], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 4]]
  ↳ app/serializers/film_serializer.rb:24
Completed 200 OK in 21ms (Views: 13.6ms | ActiveRecord: 5.3ms)


Started GET "/api/users/me" for 127.0.0.1 at 2019-07-27 00:47:00 +0300
Processing by UsersController#me as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 6ms (Views: 2.3ms | ActiveRecord: 1.5ms)


Started PATCH "/api/films/3/score" for 127.0.0.1 at 2019-07-27 00:52:38 +0300
Processing by FilmsController#score as HTML
  Parameters: {"score"=>"10", "id"=>"3", "film"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mFilm Load (0.2ms)[0m  [1m[34mSELECT  "films".* FROM "films" WHERE "films"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:31
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:48
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:48
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/films_controller.rb:34
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:34
  [1m[36mFilm Load (0.2ms)[0m  [1m[34mSELECT  "films".* FROM "films" WHERE "films"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:34
  [1m[36mReview Update (0.4ms)[0m  [1m[33mUPDATE "reviews" SET "date_reviewed" = $1, "score" = $2, "updated_at" = $3 WHERE "reviews"."id" = $4[0m  [["date_reviewed", "2019-07-27"], ["score", 10], ["updated_at", "2019-07-26 21:52:38.648089"], ["id", 11]]
  ↳ app/controllers/films_controller.rb:34
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/films_controller.rb:34
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 3]]
  ↳ app/controllers/films_controller.rb:52
[ActionCable] Broadcasting to review: {:type=>"scores", :scores=>[{:user_id=>10, :score=>10}], :movie_id=>3, :all_voted=>false}
Completed 204 No Content in 23ms (ActiveRecord: 1.7ms)


Started GET "/api/films/suggested" for 127.0.0.1 at 2019-07-27 00:54:52 +0300
Started GET "/api/users" for 127.0.0.1 at 2019-07-27 00:54:52 +0300
Processing by FilmsController#suggested as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mFilm Load (0.2ms)[0m  [1m[34mSELECT "films".* FROM "films" WHERE "films"."state" = $1[0m  [["state", 0]]
  ↳ app/controllers/films_controller.rb:11
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:7
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.3ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 3], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
  [1m[36mReview Load (1.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 3]]
  ↳ app/serializers/film_serializer.rb:24
  [1m[36mReview Load (0.1ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 4], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:7
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:11
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1 AND "reviews"."user_id" = $2 LIMIT $3[0m  [["film_id", 4], ["user_id", 5], ["LIMIT", 1]]
  ↳ app/serializers/film_serializer.rb:20
Processing by UsersController#index as HTML
  [1m[36mReview Load (1.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 4]]
  ↳ app/serializers/film_serializer.rb:24
Completed 200 OK in 25ms (Views: 18.2ms | ActiveRecord: 4.3ms)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  ↳ app/controllers/users_controller.rb:5
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 6]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 5]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 9]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 14ms (Views: 7.7ms | ActiveRecord: 2.0ms)


Started GET "/api/users/me" for 127.0.0.1 at 2019-07-27 00:54:52 +0300
Processing by UsersController#me as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "reviews"."film_id" FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."date_watched" IS NOT NULL[0m  [["user_id", 10]]
  ↳ app/serializers/user_serializer.rb:7
Completed 200 OK in 5ms (Views: 1.6ms | ActiveRecord: 0.6ms)


Started PATCH "/api/films/3/score" for 127.0.0.1 at 2019-07-27 00:55:09 +0300
Processing by FilmsController#score as HTML
  Parameters: {"score"=>"5", "id"=>"3", "film"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/commands/authorize_api_request.rb:19
  [1m[36mFilm Load (0.4ms)[0m  [1m[34mSELECT  "films".* FROM "films" WHERE "films"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:31
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:48
  [1m[36mCACHE Review Load (0.0ms)[0m  [1m[34mSELECT  "reviews".* FROM "reviews" WHERE "reviews"."user_id" = $1 AND "reviews"."film_id" = $2 LIMIT $3[0m  [["user_id", 10], ["film_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:48
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/films_controller.rb:34
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."name" ASC LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:34
  [1m[36mFilm Load (0.2ms)[0m  [1m[34mSELECT  "films".* FROM "films" WHERE "films"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/films_controller.rb:34
  [1m[36mReview Update (0.4ms)[0m  [1m[33mUPDATE "reviews" SET "score" = $1, "updated_at" = $2 WHERE "reviews"."id" = $3[0m  [["score", 5], ["updated_at", "2019-07-26 21:55:09.992780"], ["id", 11]]
  ↳ app/controllers/films_controller.rb:34
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/films_controller.rb:34
  [1m[36mReview Load (0.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."film_id" = $1[0m  [["film_id", 3]]
  ↳ app/controllers/films_controller.rb:52
[ActionCable] Broadcasting to review: {:type=>"scores", :scores=>[{:user_id=>10, :score=>5}], :movie_id=>3, :all_voted=>false}
Completed 204 No Content in 13ms (ActiveRecord: 3.1ms)


[67921] - Gracefully shutting down workers...
[67921] === puma shutdown: 2019-07-27 00:56:10 +0300 ===
[67921] - Goodbye!
Exiting
